# The Hive Micro service

#### Helpfull snipets

```json
// Quickly create request handlers

{
  "Express prisma Get all": {
    "prefix": "eget",
    "body": [
      "export const get$1s = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const results = await $2.findMany({",
      "      where: { voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json({ results });",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express prisma Get all"
  },
  "Express prisma Get id": {
    "prefix": "egetid",
    "body": [
      "export const get$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $2.findUniqueOrThrow({",
      "      where: { id: req.params.$3;, voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express prisma Get id"
  },
  "Express prisma post add": {
    "prefix": "epost",
    "body": [
      "export const add$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $3.create({",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express prisma post add"
  },
  "Express update handler": {
    "prefix": "eput",
    "body": [
      "export const update$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $1.update({",
      "      where: { id: req.params.$3, voided: false },",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express update handler"
  },
  "Express patch handler": {
    "prefix": "epatch",
    "body": [
      "export const patch$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.partial().safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $3.update({",
      "      where: { id: req.params.$4, voided: false },",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      ""
    ],
    "description": "Express patch handler"
  },
  "Express delete handler": {
    "prefix": "edelete",
    "body": [
      "export const delete$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $2.update({",
      "      where: { id: req.params.$3, voided: false },",
      "      data: {",
      "        voided: true,",
      "      },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express delete handler"
  },
  "Express purge handler": {
    "prefix": "epurge",
    "body": [
      "export const purge$1 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $2.delete({",
      "      where: { id: req.params.$3, voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};"
    ],
    "description": "Express purge handler"
  },
  "Import express": {
    "prefix": "eimport",
    "body": [
      "import { NextFunction, Request, Response } from \"express\";",
      "import {",
      "  APIException,",
      "  getMultipleOperationCustomRepresentationQeury,",
      "} from \"@hive/core-utils\";"
    ],
    "description": "Import express"
  },
  "Express crude handlers": {
    "prefix": "ecrud",
    "body": [
      "import { NextFunction, Request, Response } from \"express\";",
      "import { $1 } from \"../models\";",
      "import { $2 } from \"@/utils/validators\";",
      "import {",
      "  APIException,",
      "  getMultipleOperationCustomRepresentationQeury,",
      "} from \"@hive/core-utils\";",
      "",
      "export const get$3s = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const results = await $1.findMany({",
      "      where: { voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json({ results });",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const get$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $1.findUniqueOrThrow({",
      "      where: { id: req.params.$4, voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const add$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $1.create({",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const update$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $1.update({",
      "      where: { id: req.params.$4, voided: false },",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const patch$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const validation = await $2.partial().safeParseAsync(req.body);",
      "    if (!validation.success)",
      "      throw new APIException(400, validation.error.format());",
      "    const item = await $1.update({",
      "      where: { id: req.params.$4, voided: false },",
      "      data: validation.data,",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const delete$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $1.update({",
      "      where: { id: req.params.$4, voided: false },",
      "      data: {",
      "        voided: true,",
      "      },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "export const purge$3 = async (",
      "  req: Request,",
      "  res: Response,",
      "  next: NextFunction",
      ") => {",
      "  try {",
      "    const item = await $1.delete({",
      "      where: { id: req.params.$4, voided: false },",
      "      ...getMultipleOperationCustomRepresentationQeury(req.query?.v as string),",
      "    });",
      "    return res.json(item);",
      "  } catch (error) {",
      "    next(error);",
      "  }",
      "};",
      "",
      "",
      ""
    ],
    "description": "Express crude handlers"
  }
}
```
